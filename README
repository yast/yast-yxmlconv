ycpxml2ruby

Intro
-----

yast2-core, since approx version 2.15.8, has the ability to transform
YCP into and XML representation. This is based on the abstract syntax
tree built up by the scanner/parser of libycp.

The 'ycpc' CLI tool can be instructed (with the '-x' parameter) to output
XML instead of yast bytecode.


Usage
-----

'convert.rb' is the main file for the converter

ycpc -c -x code.ycp -o code.xml

ruby convert.rb code.xml > code.rb


Files
-----

block.rb
  Handling everything within <block>...</block>

convert.rb
  main()

expressions.rb
  Handling expressions

helper.rb
  Helper functions

listener.rb
  Main rexml stream listener class

output.rb
  Output handler
  Cares for proper indentation and comment placing

statements.rb
  Handling statements

symbols.rb
  Handling symbol declarations


ToDo
----

- comments
  The ycp scanner throws comments away. These should be made available
  to the XML code and re-appear in the Ruby output.

- ruby keywords
  YCP variable names might clash with Ruby keywords.

- ycp builtins
  Implement builtins, like 'bracket', etc.

- include files
  The xml output doesn't show 'include' statements but only 'filename'
  at the beginning and end of an included file. The file itself is part
  of the xml stream and thus the resulting ruby file.
  Maybe <filename> tags should be tracked and ruby conversion disabled
  until <filename> points back to the original file.

- yereference
  References aren't properly handled
  a comment is placed below the reference currently

- ycp term
  There is no Ruby representation for YCP terms but they are used
  heavily esp. in UI code. Prefixing every term with UI:: is probably
  not a good solution. Maybe a fixed list of 'known' UI terms (HBox,
  VBox, ...) could be helpful

- break in switch
  YCP uses break to exit a 'case' within 'switch' - just like C
  This is unneeded in Ruby and should be removed.
